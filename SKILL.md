---
name: video-to-canvas
description: |
  å°†è§†é¢‘è½¬æ¢ä¸º Obsidian Canvas å¯è§†åŒ–ç¬”è®°ã€‚

  ä¸‰é˜¶æ®µæ··åˆç®¡é“ (ç¤¾åŒºéªŒè¯æœ€ä½³å®è·µ)ï¼š
  1. Stage 1 (Ears): WhisperX/Gemini éŸ³é¢‘è½¬å½•
  2. Stage 2 (Eyes): Gemini è§†è§‰æ£€æµ‹ + FFmpeg æˆªå›¾
  3. Stage 3 (Brain): LLM åŒé€šé“èåˆç”Ÿæˆç¬”è®°
  4. Phase 4: Claude æ™ºèƒ½å¸ƒå±€ç”Ÿæˆ Canvas

  ç”¨æ³•ï¼š/video-to-canvas <è§†é¢‘è·¯å¾„> [é€‰é¡¹]

user-invocable: true

allowed-tools:
  - Read
  - Write
  - Edit
  - Glob
  - Grep
  - Bash
  - AskUserQuestion
  - Task
  - mcp__sequential-thinking__sequentialthinking

skills:
  - obsidian-canvas

hooks:
  PreToolUse:
    - matcher: "Bash"
      hooks:
        - type: command
          command: "echo '[video-to-canvas] æ‰§è¡Œç³»ç»Ÿå‘½ä»¤...'"
---

# Video to Canvas

å°†è§†é¢‘è½¬æ¢ä¸º Obsidian Canvas å¯è§†åŒ–ç¬”è®°ï¼ˆä¸‰é˜¶æ®µæ··åˆç®¡é“ï¼‰ã€‚

## å¿«é€Ÿä½¿ç”¨

```bash
/video-to-canvas <è§†é¢‘è·¯å¾„>
/video-to-canvas video.mp4 --depth=deep_dive
/video-to-canvas video.mp4 --no-transcribe     # è·³è¿‡è½¬å½•ï¼ˆæ—§æ¨¡å¼ï¼‰
/video-to-canvas video.mp4 --layout=mindmap
```

---

## å®Œæ•´å·¥ä½œæµï¼ˆä¸‰é˜¶æ®µæ··åˆç®¡é“ï¼‰

```
ğŸ“¹ è§†é¢‘æ–‡ä»¶
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 1 (Ears)   â”‚  â”‚ Stage 2 (Eyes)   â”‚
â”‚ WhisperX/Gemini  â”‚  â”‚ Gemini è§†è§‰æ£€æµ‹  â”‚
â”‚ éŸ³é¢‘è½¬å½•         â”‚  â”‚ + FFmpeg æˆªå›¾    â”‚
â”‚ â†’ æ—¶é—´æˆ³æ–‡æœ¬     â”‚  â”‚ â†’ screenshots/   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                      â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 3 (Brain)            â”‚
â”‚ Gemini 2.5 Flash           â”‚
â”‚ è½¬å½•æ–‡æœ¬ + æˆªå›¾ â†’ ç¬”è®°    â”‚
â”‚ 15 åˆ†é’Ÿåˆ†æ®µé¿å…å¹»è§‰        â”‚
â”‚ â†’ ç»“æ„åŒ– Markdown          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 4: Claude            â”‚
â”‚ è¯­ä¹‰ç†è§£ + æ™ºèƒ½å¸ƒå±€        â”‚
â”‚ â†’ .canvas æ–‡ä»¶             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
ğŸ“Š Obsidian Canvas å¯è§†åŒ–ç¬”è®°
```

### ä¸ºä»€ä¹ˆéœ€è¦ä¸‰é˜¶æ®µï¼Ÿ

| é—®é¢˜ | æ—§æ¶æ„ | ä¸‰é˜¶æ®µç®¡é“ |
|------|--------|-----------|
| éŸ³é¢‘å†…å®¹ä¸¢å¤± | Phase 2 åªå‘é€æˆªå›¾ï¼Œä¸¢å¤±å£è¿°å†…å®¹ | Stage 1 è½¬å½•éŸ³é¢‘ï¼ŒStage 3 èåˆ |
| é•¿è§†é¢‘å¹»è§‰ | Gemini >20min ä¸¥é‡å¹»è§‰ | 15 åˆ†é’Ÿåˆ†æ®µå¤„ç† |
| ä¿¡æ¯ä¸å®Œæ•´ | åªæœ‰å±å¹•å˜åŒ–ï¼Œæ— è®²è§£å†…å®¹ | åŒé€šé“ï¼šè§†è§‰+éŸ³é¢‘ |
| æˆªå›¾è¦†ç›–ç¼ºå£ | Gemini åªåˆ†æå‰åŠéƒ¨åˆ† | Stage 2.5 è‡ªåŠ¨è¡¥å…… + ffprobe æ—¶é•¿æ ¡æ­£ |
| å¹»è§‰å›¾ç‰‡å¼•ç”¨ | LLM ç¼–é€ ä¸å­˜åœ¨çš„æˆªå›¾è·¯å¾„ | æç¤ºè¯çº¦æŸ + åå¤„ç†éªŒè¯ |

### é˜²æŠ¤æœºåˆ¶ï¼ˆè‡ªåŠ¨ç”Ÿæ•ˆï¼‰

ç®¡é“å†…ç½®ä»¥ä¸‹é˜²æŠ¤ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ï¼š

| æœºåˆ¶ | ä½ç½® | è§£å†³çš„é—®é¢˜ |
|------|------|-----------|
| **ffprobe æ—¶é•¿ä¼˜å…ˆ** | Stage 2.5, Stage 3 | Gemini Audio è½¬å½•æ—¶é•¿å¯èƒ½å¹»è§‰ï¼ˆå¦‚ 56min è§†é¢‘æŠ¥å‘Š 78minï¼‰ |
| **Stage 2.5 è¦†ç›–ç‡æ£€æŸ¥** | Stage 2 ä¹‹å | Gemini è§†è§‰æ£€æµ‹åªåˆ†æå‰åŠéƒ¨åˆ†ï¼ŒååŠæ®µæ— æˆªå›¾ |
| **è‡ªåŠ¨è¡¥å……æˆªå›¾** | Stage 2.5 | æœªè¦†ç›–åŒºåŸŸæ¯ 30 ç§’è‡ªåŠ¨æˆªå›¾å¡«å…… |
| **åˆ†æ®µæ—¶é•¿æˆªæ–­** | Stage 3 åˆ†æ®µ | è¶…å‡ºå®é™…è§†é¢‘æ—¶é•¿çš„è½¬å½• chunks è¢«ä¸¢å¼ƒ |
| **æç¤ºè¯æˆªå›¾çº¦æŸ** | Stage 3 Prompt | æ˜ç¡®å‘ŠçŸ¥ LLM åªèƒ½å¼•ç”¨åˆ—è¡¨ä¸­çš„æˆªå›¾æ–‡ä»¶ |
| **åå¤„ç†å›¾ç‰‡éªŒè¯** | ä¿å­˜ MD å‰ | æ‰«ææ‰€æœ‰ `![](screenshots/...)` å¼•ç”¨ï¼Œç§»é™¤æŒ‡å‘ä¸å­˜åœ¨æ–‡ä»¶çš„ |
| **åå¼•å·ä¿®å¤** | ä¿å­˜ MD å‰ | ä¿®å¤ Gemini è¾“å‡ºçš„ `` `![desc](path)` `` æ ¼å¼é—®é¢˜ |

---

## Stage 1-3: ä¸‰é˜¶æ®µç®¡é“ (Python è„šæœ¬)

### æ‰§è¡Œæ­¥éª¤

1. è¿è¡Œ Python è„šæœ¬æ‰§è¡Œä¸‰é˜¶æ®µç®¡é“ï¼š
   ```bash
   cd ~/.claude/skills/video-to-canvas/scripts
   python video_to_md.py "<è§†é¢‘è·¯å¾„>" -o "<è¾“å‡ºç›®å½•>" --depth balanced
   ```

2. ç­‰å¾…æ‰§è¡Œå®Œæˆï¼Œè·å–ï¼š
   - `<è¾“å‡ºç›®å½•>/<è§†é¢‘å>.md` - Markdown ç¬”è®°
   - `<è¾“å‡ºç›®å½•>/screenshots/` - æˆªå›¾ç›®å½•
   - `<è¾“å‡ºç›®å½•>/<è§†é¢‘å>_transcript.json` - è½¬å½•ç»“æœ
   - `<è¾“å‡ºç›®å½•>/<è§†é¢‘å>_changes.json` - å˜åŒ–ç‚¹ä¿¡æ¯
   - `<è¾“å‡ºç›®å½•>/<è§†é¢‘å>.srt` - è‹±æ–‡å­—å¹•ï¼ˆç²¾ç¡®æ—¶é—´æˆ³ï¼Œé»˜è®¤ç”Ÿæˆï¼‰
   - `<è¾“å‡ºç›®å½•>/<è§†é¢‘å>.<lang>.srt` - ç¿»è¯‘å­—å¹•ï¼ˆä½¿ç”¨ `--srt-lang` æ—¶ç”Ÿæˆï¼‰

### å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--depth` | ç¬”è®°æ·±åº¦ | balanced |
| `--density` | æ£€æµ‹å¯†åº¦ (sparse/normal/dense) | normal |
| `--min-interval` | æœ€å°æˆªå›¾é—´éš”ï¼ˆç§’ï¼‰| 2.0 |
| `--fusion` | å¯ç”¨è§†è§‰åŒé€šé“èåˆ | false |
| `--backend` | è½¬å½•åç«¯ (auto/faster-whisper/gemini) | auto |
| `--whisper-model` | Whisper æ¨¡å‹å¤§å° | large-v3 |
| `--segment-minutes` | é•¿è§†é¢‘åˆ†æ®µæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰| 15 |
| `--transcript` | å·²æœ‰è½¬å½•æ–‡ä»¶è·¯å¾„ | - |
| `--no-transcribe` | è·³è¿‡éŸ³é¢‘è½¬å½•ï¼ˆæ—§æ¨¡å¼ï¼‰| false |
| `--no-srt` | ä¸ç”Ÿæˆ SRT å­—å¹•æ–‡ä»¶ | false |
| `--srt-lang` | SRT ç¿»è¯‘ç›®æ ‡è¯­è¨€ (å¦‚ zh, ja, ko) | ä¸ç¿»è¯‘ |

### æ·±åº¦é€‰é¡¹

- `short_hand`: æç®€æ¨¡å¼ï¼Œè¦ç‚¹åˆ—è¡¨
- `balanced`: å¹³è¡¡æ¨¡å¼ï¼ˆæ¨èï¼‰ï¼Œæ®µè½+åˆ—è¡¨
- `deep_dive`: æ·±åº¦æ¨¡å¼ï¼Œè¯¦å°½è§£é‡Š

### è½¬å½•åç«¯é€‰æ‹©

| åç«¯ | ä¼˜åŠ¿ | è¦æ±‚ |
|------|------|------|
| **faster-whisper** (æ¨è) | é€Ÿåº¦å¿«ã€VAD å»å¹»è§‰ã€æœ¬åœ°è¿è¡Œ | `pip install faster-whisper` |
| **gemini** (å¤‡é€‰) | æ— éœ€æœ¬åœ°æ¨¡å‹ã€é›¶é…ç½® | GEMINI_API_KEY |

`--backend auto` ä¼šè‡ªåŠ¨æ£€æµ‹ï¼šä¼˜å…ˆä½¿ç”¨ faster-whisperï¼Œæœªå®‰è£…åˆ™å›é€€åˆ° Geminiã€‚

---

## Phase 4: Canvas æ™ºèƒ½ç”Ÿæˆ

Phase 1-3 ç”± Python è„šæœ¬æ‰§è¡Œåï¼ŒPhase 4 ç”± Claude å®Œæˆã€‚

### è¾“å…¥

è¯»å– Phase 3 ç”Ÿæˆçš„ Markdown ç¬”è®°æ–‡ä»¶ã€‚

### åˆ†æä»»åŠ¡

1. **ç»“æ„è¯†åˆ«**
   ```
   # æ ‡é¢˜ â†’ ç”»å¸ƒæ ‡é¢˜ï¼ˆä¸åˆ›å»ºèŠ‚ç‚¹ï¼‰
   ## ä¸€çº§ç« èŠ‚ â†’ group èŠ‚ç‚¹ï¼ˆåˆ†ç»„å®¹å™¨ï¼‰
   ### äºŒçº§ç« èŠ‚ â†’ text èŠ‚ç‚¹
   #### ä¸‰çº§æ ‡é¢˜ â†’ text èŠ‚ç‚¹ï¼ˆåœ¨çˆ¶èŠ‚ç‚¹å†…ï¼‰
   ![æè¿°](path) â†’ file èŠ‚ç‚¹
   ```

2. **è¯­ä¹‰åˆ†æ**
   - å¹¶åˆ—å…³ç³» â†’ æ°´å¹³æ’åˆ—
   - å±‚çº§å…³ç³» â†’ å‚ç›´æ’åˆ—
   - å¯¹æ¯”å…³ç³» â†’ å·¦å³å¯¹ç§°
   - é‡è¦å†…å®¹ â†’ é¢œè‰²é«˜äº®

3. **å¸ƒå±€å†³ç­–**
   - æ•™ç¨‹ç±» â†’ æµç¨‹å›¾å¸ƒå±€ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰
   - æ¦‚å¿µç±» â†’ æ€ç»´å¯¼å›¾ï¼ˆä¸­å¿ƒè¾å°„ï¼‰
   - å¯¹æ¯”ç±» â†’ è¡¨æ ¼å¸ƒå±€ï¼ˆå·¦å³å¯¹ç§°ï¼‰

### è¾“å‡ºæ ¼å¼

ç”Ÿæˆ JSON Canvas æ ¼å¼ï¼š

```json
{
  "nodes": [
    {
      "id": "group-ç« èŠ‚å",
      "type": "group",
      "label": "ä¸€ã€ç« èŠ‚æ ‡é¢˜",
      "x": 0, "y": 0,
      "width": 800, "height": 400,
      "color": "4"
    },
    {
      "id": "text-çŸ¥è¯†ç‚¹",
      "type": "text",
      "text": "### çŸ¥è¯†ç‚¹æ ‡é¢˜\n\nå†…å®¹æè¿°...",
      "x": 50, "y": 80,
      "width": 350, "height": 150
    },
    {
      "id": "img-00-36",
      "type": "file",
      "file": "<è¾“å‡ºç›®å½•å>/screenshots/00-36.jpg",
      "x": 50, "y": 250,
      "width": 350, "height": 250
    }
  ],
  "edges": [
    {
      "id": "edge-1",
      "fromNode": "text-çŸ¥è¯†ç‚¹",
      "toNode": "img-00-36",
      "fromSide": "bottom",
      "toSide": "top",
      "label": "æ¼”ç¤º"
    }
  ]
}
```

---

## JSON Canvas æ ¼å¼è§„èŒƒ

### èŠ‚ç‚¹ç±»å‹

| ç±»å‹ | ç”¨é€” | å¿…éœ€å­—æ®µ |
|------|------|---------|
| `text` | Markdown æ–‡æœ¬ | `text` |
| `file` | å›¾ç‰‡/æ–‡ä»¶å¼•ç”¨ | `file` |
| `link` | å¤–éƒ¨ URL | `url` |
| `group` | åˆ†ç»„å®¹å™¨ | `label` (å¯é€‰) |

### é€šç”¨èŠ‚ç‚¹å±æ€§

```json
{
  "id": "unique-16-char-hex",
  "type": "text|file|link|group",
  "x": 0,
  "y": 0,
  "width": 300,
  "height": 150,
  "color": "1"  // å¯é€‰
}
```

### é¢œè‰²ç³»ç»Ÿ

| å€¼ | é¢œè‰² | å»ºè®®ç”¨é€” |
|----|------|---------|
| "1" | çº¢è‰² | é‡è¦/è­¦å‘Š |
| "2" | æ©™è‰² | æç¤º/æ³¨æ„ |
| "3" | é»„è‰² | é«˜äº®é‡ç‚¹ |
| "4" | ç»¿è‰² | æ­£ç¡®/å®Œæˆ |
| "5" | é’è‰² | å¼•ç”¨/é“¾æ¥ |
| "6" | ç´«è‰² | æ¦‚å¿µ/å®šä¹‰ |

ä¹Ÿæ”¯æŒ hex æ ¼å¼ï¼š`"#FF5733"`

### Edge å±æ€§

```json
{
  "id": "edge-unique-id",
  "fromNode": "source-node-id",
  "toNode": "target-node-id",
  "fromSide": "bottom",  // top|right|bottom|left
  "toSide": "top",
  "toEnd": "arrow",      // arrow|none
  "label": "å…³ç³»æè¿°"    // å¯é€‰
}
```

---

## å¸ƒå±€ç®—æ³•

### å°ºå¯¸å»ºè®®

| å…ƒç´  | å®½åº¦ | é«˜åº¦ |
|------|------|------|
| æ ‡é¢˜æ–‡æœ¬èŠ‚ç‚¹ | 300 | 80 |
| å†…å®¹æ–‡æœ¬èŠ‚ç‚¹ | 400 | 150 |
| å›¾ç‰‡èŠ‚ç‚¹ | 350 | 250 |
| åˆ†ç»„æœ€å° | è‡ªé€‚åº” | è‡ªé€‚åº” |
| èŠ‚ç‚¹æ°´å¹³é—´è· | 100 | - |
| èŠ‚ç‚¹å‚ç›´é—´è· | 80 | - |

### å±‚çº§å¸ƒå±€ï¼ˆé»˜è®¤ï¼‰

```
                    [æ–‡æ¡£æ ‡é¢˜]
                        â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚                   â”‚
[Group: ç« èŠ‚1]    [Group: ç« èŠ‚2]     [Group: ç« èŠ‚3]
    â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”´â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”´â”€â”€â”€â”
â”‚       â”‚         â”‚           â”‚        â”‚       â”‚
[çŸ¥è¯†ç‚¹] [çŸ¥è¯†ç‚¹]  [çŸ¥è¯†ç‚¹]   [çŸ¥è¯†ç‚¹]  [çŸ¥è¯†ç‚¹] [çŸ¥è¯†ç‚¹]
   â”‚        â”‚        â”‚           â”‚        â”‚        â”‚
[å›¾ç‰‡]   [å›¾ç‰‡]   [å›¾ç‰‡]      [å›¾ç‰‡]   [å›¾ç‰‡]   [å›¾ç‰‡]
```

### åæ ‡è®¡ç®—è§„åˆ™

1. **æ ¹èŠ‚ç‚¹**ï¼šä» (0, 0) å¼€å§‹
2. **Group å†…éƒ¨**ï¼špadding 50px
3. **åŒçº§èŠ‚ç‚¹**ï¼šæ°´å¹³æ’åˆ—ï¼Œé—´è· 100px
4. **å­èŠ‚ç‚¹**ï¼šå‚ç›´æ’åˆ—åœ¨çˆ¶èŠ‚ç‚¹ä¸‹æ–¹ï¼Œé—´è· 80px
5. **å›¾ç‰‡èŠ‚ç‚¹**ï¼šç´§è·Ÿå¯¹åº”æ–‡æœ¬èŠ‚ç‚¹ä¸‹æ–¹

### é¿å…é‡å 

- è®¡ç®—æ¯ä¸ª group çš„å®é™…å®½é«˜ï¼ˆåŸºäºå†…éƒ¨èŠ‚ç‚¹ï¼‰
- Group ä¹‹é—´ä¿æŒ 100px é—´è·
- ä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†è®¡ç®—åæ ‡

---

## å›¾ç‰‡è·¯å¾„å¤„ç†

### Markdown ä¸­çš„å›¾ç‰‡

```markdown
![é“¾æ¥æ¼”ç¤º](screenshots/00-36.jpg)
```

### è½¬æ¢ä¸º Canvas file èŠ‚ç‚¹

```json
{
  "id": "img-00-36",
  "type": "file",
  "file": "<è¾“å‡ºç›®å½•å>/screenshots/00-36.jpg",
  "x": 50,
  "y": 250,
  "width": 350,
  "height": 250
}
```

**âš ï¸ é‡è¦ï¼šVault ç›¸å¯¹è·¯å¾„**

Obsidian Canvas çš„ `file` è·¯å¾„æ˜¯**ç›¸å¯¹äº vault æ ¹ç›®å½•**çš„ï¼Œä¸æ˜¯ç›¸å¯¹äº `.canvas` æ–‡ä»¶ã€‚

ä¾‹å¦‚ï¼Œè¾“å‡ºç›®å½•ä¸º `lecture1/`ï¼Œç”¨æˆ·å°†å…¶å¤åˆ¶åˆ° vault æ ¹ç›®å½•åï¼š
```
vaultæ ¹ç›®å½•/
â”œâ”€â”€ lecture1/
â”‚   â”œâ”€â”€ lecture.canvas
â”‚   â”œâ”€â”€ lecture.md
â”‚   â””â”€â”€ screenshots/
â”‚       â””â”€â”€ 05-33.jpg
```

Canvas ä¸­çš„è·¯å¾„åº”ä¸ºï¼š
```json
"file": "lecture1/screenshots/05-33.jpg"   // âœ… æ­£ç¡® (vault ç›¸å¯¹è·¯å¾„)
"file": "screenshots/05-33.jpg"            // âŒ é”™è¯¯ (canvas ç›¸å¯¹è·¯å¾„)
```

**Phase 4 ç”Ÿæˆè§„åˆ™**ï¼š`file` å­—æ®µå¿…é¡»ä½¿ç”¨ `<è¾“å‡ºç›®å½•å>/screenshots/xx-xx.jpg` æ ¼å¼ã€‚

---

## æ‰§è¡Œæµç¨‹

å½“ç”¨æˆ·è°ƒç”¨ `/video-to-canvas <è§†é¢‘è·¯å¾„>` æ—¶ï¼š

### Step 1: å‚æ•°è§£æ

```
è§†é¢‘è·¯å¾„: <ç”¨æˆ·æä¾›>
è¾“å‡ºç›®å½•: ä¸è§†é¢‘åŒç›®å½•ï¼Œæˆ–ç”¨æˆ·æŒ‡å®š
æ·±åº¦: balanced (é»˜è®¤)
å¸ƒå±€: hierarchical (é»˜è®¤)
```

### Step 2: æ‰§è¡Œä¸‰é˜¶æ®µç®¡é“

```bash
cd ~/.claude/skills/video-to-canvas/scripts
python video_to_md.py "<è§†é¢‘è·¯å¾„>" -o "<è¾“å‡ºç›®å½•>" --depth <æ·±åº¦>
```

ç­‰å¾…è„šæœ¬å®Œæˆï¼Œæ£€æŸ¥è¾“å‡ºï¼š
- `<è¾“å‡ºç›®å½•>/<è§†é¢‘å>.md` å­˜åœ¨
- `<è¾“å‡ºç›®å½•>/screenshots/` ç›®å½•æœ‰å›¾ç‰‡
- `<è¾“å‡ºç›®å½•>/<è§†é¢‘å>_transcript.json` å­˜åœ¨ï¼ˆå¦‚å¯ç”¨è½¬å½•ï¼‰

### Step 3: è¯»å– Markdown

```
ä½¿ç”¨ Read å·¥å…·è¯»å–ç”Ÿæˆçš„ .md æ–‡ä»¶
```

### Step 4: åˆ†æå¹¶ç”Ÿæˆ Canvas

1. è§£æ Markdown ç»“æ„ï¼ˆæ ‡é¢˜ã€å†…å®¹ã€å›¾ç‰‡ï¼‰
2. ç¡®å®šè¯­ä¹‰å…³ç³»å’Œå¸ƒå±€ç­–ç•¥
3. è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„åæ ‡
4. ç”Ÿæˆ JSON Canvas
5. **file èŠ‚ç‚¹è·¯å¾„**: ä½¿ç”¨ `<è¾“å‡ºç›®å½•å>/screenshots/xx-xx.jpg` (vault ç›¸å¯¹è·¯å¾„)
6. **text èŠ‚ç‚¹å†…å®¹**: ç¡®ä¿ JSON å­—ç¬¦ä¸²ä¸­çš„åŒå¼•å·å·²è½¬ä¹‰ (`\"`) æˆ–æ›¿æ¢ä¸ºå…¨è§’å¼•å·

### Step 5: å†™å…¥ Canvas æ–‡ä»¶

```
ä½¿ç”¨ Write å·¥å…·å†™å…¥ <è§†é¢‘å>.canvas
```

### Step 6: æŠ¥å‘Šç»“æœ

```
âœ… ä¸‰é˜¶æ®µæ··åˆç®¡é“å®Œæˆï¼

è¾“å‡ºæ–‡ä»¶ï¼š
â”œâ”€â”€ <è§†é¢‘å>.md                 # Markdown ç¬”è®°ï¼ˆåŒé€šé“èåˆï¼‰
â”œâ”€â”€ <è§†é¢‘å>.canvas             # Canvas å¯è§†åŒ–
â”œâ”€â”€ <è§†é¢‘å>.srt                # è‹±æ–‡å­—å¹•ï¼ˆç²¾ç¡®æ—¶é—´æˆ³ï¼Œé»˜è®¤ç”Ÿæˆï¼‰
â”œâ”€â”€ <è§†é¢‘å>.<lang>.srt         # ç¿»è¯‘å­—å¹•ï¼ˆ--srt-lang æ—¶ç”Ÿæˆï¼‰
â”œâ”€â”€ <è§†é¢‘å>_transcript.json    # éŸ³é¢‘è½¬å½•ç»“æœ
â”œâ”€â”€ <è§†é¢‘å>_changes.json       # å˜åŒ–ç‚¹ä¿¡æ¯
â””â”€â”€ screenshots/                # æˆªå›¾ç›®å½•

æç¤ºï¼šå°†æ•´ä¸ªè¾“å‡ºç›®å½•å¤åˆ¶åˆ° Obsidian vault ä¸­ï¼Œ
ç„¶åæ‰“å¼€ .canvas æ–‡ä»¶æŸ¥çœ‹å¯è§†åŒ–ç¬”è®°ã€‚
SRT å­—å¹•æ–‡ä»¶ä¼šè¢« Media Extended æ’ä»¶è‡ªåŠ¨æ£€æµ‹ï¼ˆåŒååŒç›®å½•ï¼‰ã€‚
```

---

## é”™è¯¯å¤„ç†

### Python è„šæœ¬æ‰§è¡Œå¤±è´¥

1. æ£€æŸ¥ GEMINI_API_KEY ç¯å¢ƒå˜é‡
2. æ£€æŸ¥è§†é¢‘æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥ FFmpeg æ˜¯å¦å®‰è£…

### è½¬å½•å¤±è´¥

1. `--backend auto`: faster-whisper æœªå®‰è£…æ—¶è‡ªåŠ¨å›é€€åˆ° Gemini
2. å®‰è£… faster-whisper: `pip install faster-whisper`
3. æˆ–å¼ºåˆ¶ä½¿ç”¨ Gemini: `--backend gemini`
4. ä½¿ç”¨å·²æœ‰è½¬å½•: `--transcript existing_transcript.json`
5. è·³è¿‡è½¬å½•: `--no-transcribe`

### å›¾ç‰‡ä¸æ˜¾ç¤º

1. ç¡®ä¿ `screenshots/` ç›®å½•ä¸ `.canvas` æ–‡ä»¶åœ¨åŒä¸€ç›®å½•
2. æ£€æŸ¥å›¾ç‰‡è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰

### Canvas èŠ‚ç‚¹é‡å 

1. å¢åŠ  `nodeSpacing` å‚æ•°
2. ä½¿ç”¨æ›´ç®€åŒ–çš„å¸ƒå±€

---

## é«˜çº§é€‰é¡¹

### æŒ‡å®šå¸ƒå±€

```bash
/video-to-canvas video.mp4 --layout=mindmap
```

å¸ƒå±€é€‰é¡¹ï¼š
- `hierarchical`: å±‚çº§å¸ƒå±€ï¼ˆé»˜è®¤ï¼‰
- `mindmap`: æ€ç»´å¯¼å›¾
- `flowchart`: æµç¨‹å›¾

### æŒ‡å®šæ·±åº¦

```bash
/video-to-canvas video.mp4 --depth=deep_dive
```

### åªç”Ÿæˆ Canvasï¼ˆå·²æœ‰ MDï¼‰

```bash
/video-to-canvas --canvas-only existing-notes.md
```

---

## ç¤ºä¾‹è¾“å‡º

### è¾“å…¥ Markdown ç‰‡æ®µ

```markdown
# Obsidian æ ¸å¿ƒåŠŸèƒ½

## ä¸€ã€åŒå‘é“¾æ¥

åŒå‘é“¾æ¥è®©ç¬”è®°å½¢æˆç½‘çŠ¶ç»“æ„ï¼Œè€Œéä¼ ç»Ÿçš„æ ‘çŠ¶å±‚çº§ã€‚

### ä»€ä¹ˆæ˜¯åŒå‘é“¾æ¥ï¼Ÿ

å½“ç¬”è®° A é“¾æ¥åˆ°ç¬”è®° B æ—¶ï¼ŒB ä¼šè‡ªåŠ¨æ˜¾ç¤ºåå‘é“¾æ¥ã€‚

![é“¾æ¥æ¼”ç¤º](screenshots/00-36.jpg)

### å¦‚ä½•åˆ›å»ºï¼Ÿ

1. è¾“å…¥ `[[` è§¦å‘å»ºè®®
2. é€‰æ‹©ç›®æ ‡ç¬”è®°
3. æŒ‰ Enter ç¡®è®¤

![åˆ›å»ºé“¾æ¥](screenshots/00-48.jpg)

## äºŒã€æœ¬åœ°å­˜å‚¨

æ‰€æœ‰æ–‡ä»¶ä»¥ Markdown æ ¼å¼å­˜å‚¨åœ¨æœ¬åœ°ã€‚

![æœ¬åœ°æ–‡ä»¶](screenshots/01-16.jpg)
```

### è¾“å‡º Canvas

```json
{
  "nodes": [
    {
      "id": "group-åŒå‘é“¾æ¥",
      "type": "group",
      "label": "ä¸€ã€åŒå‘é“¾æ¥",
      "x": 0,
      "y": 0,
      "width": 850,
      "height": 700,
      "color": "4"
    },
    {
      "id": "text-intro",
      "type": "text",
      "text": "åŒå‘é“¾æ¥è®©ç¬”è®°å½¢æˆç½‘çŠ¶ç»“æ„ï¼Œè€Œéä¼ ç»Ÿçš„æ ‘çŠ¶å±‚çº§ã€‚",
      "x": 50,
      "y": 50,
      "width": 750,
      "height": 60
    },
    {
      "id": "text-what",
      "type": "text",
      "text": "### ä»€ä¹ˆæ˜¯åŒå‘é“¾æ¥ï¼Ÿ\n\nå½“ç¬”è®° A é“¾æ¥åˆ°ç¬”è®° B æ—¶ï¼ŒB ä¼šè‡ªåŠ¨æ˜¾ç¤ºåå‘é“¾æ¥ã€‚",
      "x": 50,
      "y": 130,
      "width": 350,
      "height": 120
    },
    {
      "id": "img-00-36",
      "type": "file",
      "file": "<è¾“å‡ºç›®å½•å>/screenshots/00-36.jpg",
      "x": 50,
      "y": 270,
      "width": 350,
      "height": 220
    },
    {
      "id": "text-how",
      "type": "text",
      "text": "### å¦‚ä½•åˆ›å»ºï¼Ÿ\n\n1. è¾“å…¥ `[[` è§¦å‘å»ºè®®\n2. é€‰æ‹©ç›®æ ‡ç¬”è®°\n3. æŒ‰ Enter ç¡®è®¤",
      "x": 450,
      "y": 130,
      "width": 350,
      "height": 120
    },
    {
      "id": "img-00-48",
      "type": "file",
      "file": "<è¾“å‡ºç›®å½•å>/screenshots/00-48.jpg",
      "x": 450,
      "y": 270,
      "width": 350,
      "height": 220
    },
    {
      "id": "group-æœ¬åœ°å­˜å‚¨",
      "type": "group",
      "label": "äºŒã€æœ¬åœ°å­˜å‚¨",
      "x": 950,
      "y": 0,
      "width": 500,
      "height": 450,
      "color": "5"
    },
    {
      "id": "text-local",
      "type": "text",
      "text": "æ‰€æœ‰æ–‡ä»¶ä»¥ Markdown æ ¼å¼å­˜å‚¨åœ¨æœ¬åœ°ã€‚",
      "x": 1000,
      "y": 50,
      "width": 400,
      "height": 60
    },
    {
      "id": "img-01-16",
      "type": "file",
      "file": "<è¾“å‡ºç›®å½•å>/screenshots/01-16.jpg",
      "x": 1000,
      "y": 130,
      "width": 400,
      "height": 280
    }
  ],
  "edges": [
    {
      "id": "edge-1",
      "fromNode": "text-what",
      "toNode": "img-00-36",
      "fromSide": "bottom",
      "toSide": "top"
    },
    {
      "id": "edge-2",
      "fromNode": "text-how",
      "toNode": "img-00-48",
      "fromSide": "bottom",
      "toSide": "top"
    },
    {
      "id": "edge-3",
      "fromNode": "text-local",
      "toNode": "img-01-16",
      "fromSide": "bottom",
      "toSide": "top"
    }
  ]
}
```

---

## éªŒè¯æ¸…å•

ç”Ÿæˆ Canvas åæ£€æŸ¥ï¼š

- [ ] æ‰€æœ‰èŠ‚ç‚¹ ID å”¯ä¸€
- [ ] Edge å¼•ç”¨çš„èŠ‚ç‚¹å­˜åœ¨
- [ ] å›¾ç‰‡è·¯å¾„æœ‰æ•ˆï¼ˆç›¸å¯¹è·¯å¾„ï¼‰
- [ ] æ— èŠ‚ç‚¹é‡å 
- [ ] JSON æ ¼å¼æ­£ç¡®
- [ ] Group æ­£ç¡®åŒ…å«å­èŠ‚ç‚¹
